


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             AsmTemplate, CODE, READONLY
    2 00000000                 IMPORT           main
    3 00000000         
    4 00000000         ; (c) Mike Brady, 2011 -- 2019.
    5 00000000         
    6 00000000                 EXPORT           start
    7 00000000                 IMPORT           ReadKeyPress ;Import subroutine
                                                             to read keys
    8 00000000                 IMPORT           IO1DIR
    9 00000000                 IMPORT           IO1CLR
   10 00000000                 IMPORT           IO1SET
   11 00000000                 IMPORT           Display
   12 00000000         
   13 00000000         ;Main loop
   14 00000000         start
   15 00000000         ;val in R5 = value to display
   16 00000000         
   17 00000000 E3A05000        LDR              R5, =0
   18 00000004 E59F1090        LDR              R1, =IO1DIR
   19 00000008 E5912000        LDR              R2, [R1]
   20 0000000C E382280F        ORR              R2, #(2_1111<<16)
   21 00000010 E5812000        STR              R2, [R1]
   22 00000014 E59F1084        LDR              R1, =IO1SET
   23 00000018 E3A0480F        LDR              R4, =(2_1111 << 16)
   24 0000001C E5814000        STR              R4, [R1]
   25 00000020         
   26 00000020         
   27 00000020         
   28 00000020         LPST
   29 00000020 E3A02000        LDR              R2, =0
   30 00000024         
   31 00000024         
   32 00000024 EBFFFFFE        BL               ReadKeyPress
   33 00000028         
   34 00000028         ;Switch statement for button presses
   35 00000028 E3500014        CMP              R0, #20
   36 0000002C 0A00000D        BEQ              CASE1
   37 00000030 E3700014        CMP              R0, #-20
   38 00000034 0A000011        BEQ              CASE1L
   39 00000038 E3500015        CMP              R0, #21
   40 0000003C 0A00000C        BEQ              CASE2
   41 00000040 E3700015        CMP              R0, #-21
   42 00000044 0A00000F        BEQ              CASE2L
   43 00000048 E3500016        CMP              R0, #22
   44 0000004C 0A00000F        BEQ              DEFAULT
   45 00000050 E3700016        CMP              R0, #-22
   46 00000054 0A00000D        BEQ              DEFAULT
   47 00000058 E3500017        CMP              R0, #23
   48 0000005C 0A00000B        BEQ              DEFAULT
   49 00000060 E3700017        CMP              R0, #-23
   50 00000064 0A000009        BEQ              DEFAULT
   51 00000068         
   52 00000068         CASE1
   53 00000068 E2855201        ADD              R5, R5, #(2_1 << 28)
   54 0000006C E1A03E25        LSR              R3, R5, #28
   55 00000070 EA000006        B                SwitchEnd
   56 00000074         CASE2
   57 00000074 E2455201        SUB              R5, R5, #(2_1 << 28)
   58 00000078 E1A03E25        LSR              R3, R5, #28



ARM Macro Assembler    Page 2 


   59 0000007C EA000003        B                SwitchEnd
   60 00000080         CASE1L
   61 00000080 E3A0300F        LDR              R3, =2_1111
   62 00000084 EA000001        B                SwitchEnd
   63 00000088         CASE2L
   64 00000088 E3A0300F        LDR              R3, =2_1111
   65 0000008C EAFFFFFF        B                SwitchEnd
   66 00000090         CASE3
   67 00000090         CASE4
   68 00000090         DEFAULT
   69 00000090         SwitchEnd
   70 00000090         
   71 00000090         
   72 00000090         
   73 00000090         
   74 00000090         
   75 00000090         
   76 00000090         
   77 00000090         
   78 00000090         ;Display to LEDs
   79 00000090         
   80 00000090 E1A01003        MOV              R1, R3
   81 00000094         
   82 00000094 EBFFFFFE        BL               Display
   83 00000098         
   84 00000098         
   85 00000098 EAFFFFE0        B                LPST
   86 0000009C         
   87 0000009C         
   88 0000009C                 END
              00000000 
              00000000 
Command Line: --debug --xref --diag_suppress=9931 --apcs=interwork --depend=.\a
pp.d -o.\app.o -IC:\Keil_v5\ARM\RV31\INC -IC:\Keil_v5\ARM\CMSIS\Include -IC:\Ke
il_v5\ARM\Inc\Philips --predefine="__EVAL SETA 1" --predefine="__MICROLIB SETA 
1" --predefine="__UVISION_VERSION SETA 516" --list=.\listings\app.lst App.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

AsmTemplate 00000000

Symbol: AsmTemplate
   Definitions
      At line 1 in file App.s
   Uses
      None
Comment: AsmTemplate unused
CASE1 00000068

Symbol: CASE1
   Definitions
      At line 52 in file App.s
   Uses
      At line 36 in file App.s
Comment: CASE1 used once
CASE1L 00000080

Symbol: CASE1L
   Definitions
      At line 60 in file App.s
   Uses
      At line 38 in file App.s
Comment: CASE1L used once
CASE2 00000074

Symbol: CASE2
   Definitions
      At line 56 in file App.s
   Uses
      At line 40 in file App.s
Comment: CASE2 used once
CASE2L 00000088

Symbol: CASE2L
   Definitions
      At line 63 in file App.s
   Uses
      At line 42 in file App.s
Comment: CASE2L used once
CASE3 00000090

Symbol: CASE3
   Definitions
      At line 66 in file App.s
   Uses
      None
Comment: CASE3 unused
CASE4 00000090

Symbol: CASE4
   Definitions
      At line 67 in file App.s
   Uses
      None
Comment: CASE4 unused
DEFAULT 00000090

Symbol: DEFAULT



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 68 in file App.s
   Uses
      At line 44 in file App.s
      At line 46 in file App.s
      At line 48 in file App.s
      At line 50 in file App.s

LPST 00000020

Symbol: LPST
   Definitions
      At line 28 in file App.s
   Uses
      At line 85 in file App.s
Comment: LPST used once
SwitchEnd 00000090

Symbol: SwitchEnd
   Definitions
      At line 69 in file App.s
   Uses
      At line 55 in file App.s
      At line 59 in file App.s
      At line 62 in file App.s
      At line 65 in file App.s

start 00000000

Symbol: start
   Definitions
      At line 14 in file App.s
   Uses
      At line 6 in file App.s
Comment: start used once
11 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

Display 00000000

Symbol: Display
   Definitions
      At line 11 in file App.s
   Uses
      At line 82 in file App.s
Comment: Display used once
IO1CLR 00000000

Symbol: IO1CLR
   Definitions
      At line 9 in file App.s
   Uses
      None
Comment: IO1CLR unused
IO1DIR 00000000

Symbol: IO1DIR
   Definitions
      At line 8 in file App.s
   Uses
      At line 18 in file App.s
Comment: IO1DIR used once
IO1SET 00000000

Symbol: IO1SET
   Definitions
      At line 10 in file App.s
   Uses
      At line 22 in file App.s
Comment: IO1SET used once
ReadKeyPress 00000000

Symbol: ReadKeyPress
   Definitions
      At line 7 in file App.s
   Uses
      At line 32 in file App.s
Comment: ReadKeyPress used once
main 00000000

Symbol: main
   Definitions
      At line 2 in file App.s
   Uses
      None
Comment: main unused
6 symbols
352 symbols in table
